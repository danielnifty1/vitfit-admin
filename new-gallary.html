<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE HTML>
<html>

<head>
    <title>Admin an Admin Panel Category Flat Bootstrap Responsive Website Template | Blank :: w3layouts</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="Admin Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
    <script
        type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
    <link href="css/bootstrap.min.css" rel='stylesheet' type='text/css' />
    <!-- Custom Theme files -->
    <link href="css/style.css" rel='stylesheet' type='text/css' />
    <link href="css/font-awesome.css" rel="stylesheet">
    <script src="js/jquery.min.js"> </script>
    <script src="js/bootstrap.min.js"> </script>

    <!-- Mainly scripts -->
    <script src="js/jquery.metisMenu.js"></script>
    <script src="js/jquery.slimscroll.min.js"></script>
    <!-- Custom and plugin javascript -->
    <link href="css/custom.css" rel="stylesheet">
    <script src="js/custom.js"></script>
    <script src="js/screenfull.js"></script>
    <script>
        $(function () {
            $('#supported').text('Supported/allowed: ' + !!screenfull.enabled);

            if (!screenfull.enabled) {
                return false;
            }



            $('#toggle').click(function () {
                screenfull.toggle($('#container')[0]);
            });



        });
    </script>



</head>

<body>
    <div id="wrapper">
        <!----->
        <nav class="navbar-default navbar-static-top" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <h1> <a class="navbar-brand" href="index.html">Admin</a></h1>
            </div>
            <div class=" border-bottom">
                <div class="full-left">
                    <section class="full-top">
                        <button id="toggle"><i class="fa fa-arrows-alt"></i></button>
                    </section>
                    <form class=" navbar-left-right">
                        <input type="text" value="Search..." onfocus="this.value = '';"
                            onblur="if (this.value == '') {this.value = 'Search...';}">
                        <input type="submit" value="" class="fa fa-search">
                    </form>
                    <div class="clearfix"> </div>
                </div>


                <!-- Brand and toggle get grouped for better mobile display -->

                <!-- Collect the nav links, forms, and other content for toggling -->
                
                <div class="clearfix">

                </div>

                <div class="navbar-default sidebar" role="navigation">
                    <div class="sidebar-nav navbar-collapse">
                        <ul class="nav" id="side-menu">

                            <li>
                                <a href="index.html" class=" hvr-bounce-to-right"><i
                                        class="fa fa-dashboard nav_icon "></i><span class="nav-label">Dashboards</span>
                                </a>
                            </li>


                            <li>
                                <a href="inbox.html" class=" hvr-bounce-to-right"><i class="fa fa-inbox nav_icon"></i>
                                    <span class="nav-label">Appoitments</span> </a>
                            </li>

                            <li>
                                <a href="gallery.html" class=" hvr-bounce-to-right"><i
                                        class="fa fa-picture-o nav_icon"></i> <span class="nav-label">Gallery</span>
                                </a>
                            </li>

                            <li>
                                <a href="approaches.html" class=" hvr-bounce-to-right"><i class="fa fa-th nav_icon"></i>
                                    <span class="nav-label">Approaches</span> </a>
                            </li>

                            <li>
                                <a href="programs.html" class=" hvr-bounce-to-right"><i class="fa fa-th nav_icon"></i>
                                    <span class="nav-label">Programs</span> </a>
                            </li>



                            <li>
                                <a href="transformation.html" class=" hvr-bounce-to-right"><i
                                        class="fa fa-picture-o nav_icon"></i> <span
                                        class="nav-label">Transformation</span> </a>
                            </li>


                            <li>
                                <a href="trainer.html" class=" hvr-bounce-to-right"><i class="fa fa-user nav_icon"></i>
                                    <span class="nav-label">The Trainer</span> </a>
                            </li>

                            <li>
                                <a href="services.html" class=" hvr-bounce-to-right"><i class="fa fa-th nav_icon"></i>
                                    <span class="nav-label"> Services</span> </a>
                            </li>

                            <li>
                                <a href="members.html" class=" hvr-bounce-to-right"><i class="fa fa-users nav_icon"></i>
                                    <span class="nav-label">Members</span> </a>
                            </li>



                            <li>
                                <a href="#" class=" hvr-bounce-to-right"><i class="fa fa-cog nav_icon"></i> <span
                                        class="nav-label">Settings</span><span class="fa arrow"></span></a>
                                <ul class="nav nav-second-level">
                                    <li><a onclick="logout()" class=" hvr-bounce-to-right"><i
                                                class="fa fa-sign-in nav_icon"></i>Logout</a></li>
                                    
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
        </nav>
        <div id="page-wrapper" class="gray-bg dashbard-1">
            <div class="content-main">

                <!--banner-->
                <div class="banner">
                    <h2>
                        <a href="index.html">Home</a>
                        <i class="fa fa-angle-right"></i>
                        <span>Add Gallery</span>
                    </h2>
                </div>
                <!--//banner-->
                <!--faq-->
                <div class="blank">


                    <div class="blank-page">

                        <div class="panel-body">
                            <form role="form" id="form-submit" class="form-horizontal">
                                <div class="row" style="margin-bottom: 20px;">
                                    <label class="col-md-6 col-md-push-   control-label">Add Image to Gallery</label>


                                </div>
                                <h6 style="text-align: center; margin-bottom: 20px;" id="msg"></h6>


                                <div class="form-group pt-10">
                                    <label class="col-md-2 control-label">Image Title</label>
                                    <div class="col-md-8">
                                        <div class="input-group">
                                            <span class="input-group-addon">
                                                <i class="fa fa-th"></i>
                                            </span>
                                            <input id="title" type="text" class="form-control1"
                                                placeholder="Image Title">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-md-2 control-label">Image Note</label>
                                    <div class="col-md-8">
                                        <div class="input-group">

                                            <textarea class="form-control1" id="note"></textarea>

                                        </div>
                                    </div>
                                </div>


                                <div class="form-group">
                                    <label class="col-md-2 control-label">File input</label>
                                    <div class="col-md-8">
                                        <input type="file" accept="image/jpeg,image/png" id="file-upload"
                                            class="form-condtrol1">
                                        <p class="help-block">Example block-level help text here.</p>
                                    </div>
                                </div>

                                <div class="form-group">

                                    <div class="col-md-8 col-md-push-5">
                                        <input type="submit" id="exampleInputFile" class="form-condhtrol1">

                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!--//faq-->
                <!---->
                <div class="copy">
                    <p> &copy; 2023 Admin. All Rights Reserved | Design by <a  target="_blank">Daniel Gozie</a> </p>
                </div>
            </div>
        </div>
        <div class="clearfix"> </div>

        <img id="img" style="display: none;">
        <textarea id="theStream" style="display: none;"></textarea>
        <button id="transbutton" onclick="loader()"></button>
    </div>

    <!---->
    <!--scrolling js-->
    <script src="js/jquery.nicescroll.js"></script>
    <script src="js/scripts.js"></script>
    <script src="js/server.js"></script>
    <script src="js/session.js"></script>

    <!--//scrolling js-->

    <!-- UPLOADING TRANSFORMATION -->
    <script>
        let imageFile = document.getElementById("file-upload");

        imageFile.onchange = function () {
            img.src = URL.createObjectURL(imageFile.files[0])


        }

        // ===============================
        img.crossOrigin = 'anonymous'
        img.onload = async function () {

            await new Promise(
                async (resolve, reject) => {
                    var canvas = document.createElement('canvas');
                    var ctx = canvas.getContext('2d');
                    canvas.height = this.naturalHeight;
                    canvas.width = this.naturalWidth;
                    ctx.drawImage(this, 0, 0);
                    var image = canvas.toDataURL('image/jpeg');
                    console.log(image)
                    document.getElementById('theStream').value = image;

                }
            )
        }

        const formprop = document.querySelector('#form-submit');


        formprop.addEventListener('submit', event => {
            event.preventDefault();

            const image = document.getElementById('theStream').value;
            const title = document.getElementById('title').value;

            const note = document.getElementById('note').value;





            const data = [
                { title, image, note }
            ]


            var url = `${serverurl}/api/v1/gallery/create`
            console.log(data)
            fetch(url, {
                method: 'POST',  // body: JSON.stringify(),
                headers,
                body: JSON.stringify(data)

            }).then(res => res.json())
                .then(data => {

                    if (data && data.success == false) {

                        throw data

                    }

                    document.getElementById("msg").innerHTML = data.message
                    document.getElementById("transbutton").click();

                    formprop.reset()
                })
                .catch(error => {

                    document.getElementById("msg").innerHTML = error.Error ? error.Error : "Network error";
                    if (error && error.status == 403 || error.Error === "Token is expired" || error.status == 401) {
                        document.getElementById("msg").innerHTML = error.Error ? error.Error : "Login Again";

                        sessionStorage.removeItem("ozubulu")
                        location.replace("signin.html")

                    }
                }
                )


        })
    </script>

</body>

</html>